language: python
python_version: "3.11.7"
tools:
  - name: pytest
    version: "7.4.3"
  - name: pytest-html
    version: "4.1.1"
  - name: ruff
    version: "0.1.9"
  - name: mypy
    version: "1.8.0"

artifacts:
  - file: "pytest-results.json"
    type: pytest-json
    format: json
    description: "Pytest JSON: 5 pass, 2 fail, 1 skip"
    parsers: []
    coverage_target: "validators/pytest-validator.ts"

  - file: "pytest-report.html"
    type: pytest-html
    format: html
    description: "Pytest HTML report with test details"
    parsers: ["extractPytestJSON"]
    coverage_target: "parsers/html/pytest-html.ts"

  - file: "ruff-output.txt"
    type: ruff-txt
    format: txt
    description: "Ruff linter output with violations"
    parsers: ["extractLinterOutput"]
    coverage_target: "validators/linter-validator.ts"

  - file: "mypy-output.txt"
    type: mypy-txt
    format: txt
    description: "Mypy type checker errors"
    parsers: ["extractLinterOutput"]
    coverage_target: "validators/linter-validator.ts"

commands:
  generate: "docker-compose up --build"
  clean: "docker-compose down -v && rm -rf ../../generated/python"
